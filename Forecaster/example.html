<!DOCTYPE html>
<html>

<head>
    <title>Create Dynamic Column Chart using PHP Ajax with Google Charts</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
</head>

<body>
    <input class="series-chk" id="chk-0" type="checkbox" value="1" checked /><label for="chk-0">Column 1</label>
    <input class="series-chk" id="chk-1" type="checkbox" value="2" checked /><label for="chk-1">Column 2</label>
    <input class="series-chk" id="chk-2" type="checkbox" value="3" checked /><label for="chk-2">Column 3</label>
    <input class="series-chk" id="chk-3" type="checkbox" value="4" checked /><label for="chk-3">Column 4</label>
    <input class="series-chk" id="chk-4" type="checkbox" value="5" checked /><label for="chk-4">Column 5</label>
    <div id="line_top_x"></div>
</body>

</html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
    google.charts.load('current', { packages: ['corechart', 'bar'] }).then(function () {
        var jsonData = [{ "month": "February", "column1": "1", "column2": "2", "column3": "3", "column4": "4", "column5": "5" }, { "month": "March", "column1": "1", "column2": "2", "column3": "3", "column4": "4", "column5": "5" }, { "month": "April", "column1": "1", "column2": "2", "column3": "3", "column4": "4", "column5": "5" }, { "month": "May", "column1": "1", "column2": "2", "column3": "3", "column4": "4", "column5": "5" }, { "month": "June", "column1": "1", "column2": "2", "column3": "3", "column4": "4", "column5": "5" }, { "month": "July", "column1": "1", "column2": "2", "column3": "3", "column4": "4", "column5": "5" }, { "month": "August", "column1": "1", "column2": "2", "column3": "3", "column4": "4", "column5": "5" }, { "month": "September", "column1": "1", "column2": "2", "column3": "3", "column4": "4", "column5": "5" }, { "month": "October", "column1": "1", "column2": "2", "column3": "3", "column4": "4", "column5": "5" }, { "month": "November", "column1": "1", "column2": "2", "column3": "3", "column4": "4", "column5": "5" }, { "month": "December", "column1": "1", "column2": "2", "column3": "3", "column4": "4", "column5": "5" }, { "month": "Total", "column1": "1", "column2": "2", "column3": "3", "column4": "4", "column5": "5" }, {}];

        // create blank data table
        var data = new google.visualization.DataTable();

        // parse json
        jsonData.forEach(function (jsonRow, indexRow) {
            // add columns
            if (indexRow === 0) {
                for (var column in jsonRow) {
                    if (column === 'month') {
                        data.addColumn('string', column);
                    } else {
                        data.addColumn('number', column);
                    }
                }
            }

            // add row
            var dataRow = [];
            for (var column in jsonRow) {
                if (column === 'month') {
                    dataRow.push(jsonRow[column]);
                } else {
                    // convert string to number
                    dataRow.push(parseFloat(jsonRow[column]));
                }
            }
            if (dataRow.length > 0) {
                data.addRow(dataRow);
            }
        });

        var colors = ['red', 'yellow', 'green', 'blue', 'purple'];
        colors.forEach(function (color, index) {
            data.setColumnProperty(index + 1, 'color', color);
        });

        var options = {
            chartArea: {
                top: 12,
                right: 0,
                bottom: 72,
                left: 72
            },
            legend: {
                position: 'bottom'
            },
            colors: colors,
            hAxis: {
                slantedText: true
            },
            vAxis: {
                ticks: [0, 1, 2, 3, 4, 5],
                title: 'Amount'
            },
            bar: {
                groupWidth: '90%'
            },
            height: 400
        };

        var chart = new google.visualization.ColumnChart(document.getElementById('line_top_x'));

        $('.series-chk').on('change', drawChart);
        drawChart();

        function drawChart() {
            var chartColors = [];
            var chartColumns = [0];
            var view = new google.visualization.DataView(data);

            $.each($('.series-chk'), function (index, checkbox) {
                var seriesColumn = parseInt(checkbox.value);
                if (checkbox.checked) {
                    chartColumns.push(seriesColumn);
                    chartColors.push(data.getColumnProperty(seriesColumn, 'color'));
                }
            });

            view.setColumns(chartColumns);
            options.colors = chartColors;
            chart.draw(view, options);
        }
    });
</script>